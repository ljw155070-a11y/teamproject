<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
	.space{
		height:50px;
	}

	
	body{
		background-color:#eeeeee;
		/*ì„ì‹œ ì ìš© í—¤ë” ì™„ì„±ë˜ë©´ ì œê±°*/
	}
	
	.content-title{
		text-align:center;
	    font-size: 22px;
    	color: #EBA854 ;
    	font-family: ns-b;
    	/*ì„ì‹œ ì ìš© í—¤ë” ì™„ì„±ë˜ë©´ ì œê±°*/
	}
	.recipe.content{
		width:1080px;
		margin:100px auto;
		
	}
	.recipe.content-box{
		background-color:white;
		width : 100%;
		min-height: 500px;
		border-radius:20px;
		box-shadow:0 6px 18px rgba(0,0,0,.08);
	}
	.recipe.title{
		width : 100%;
		height : 100px;
		text-align:center;
		line-height:100px;
		font-weight:900;
		font-size:24px;
	}
	.recipe.info{
		display:flex;
		justify-content:space-between;
		padding : 20px 100px;
	}
	.recipe.info > div{
	  display:flex; 
	  align-items:center; 
	  gap:10px;
	  background:#fafafa;
	  border-radius:12px;
	  padding:10px 12px;
	  box-shadow: 0 0 0 2px #eee;
	}
	.recipe.info .material-icons{
		font-size:20px; 
		color:#EBA854 ;
	}
	
	a{
		color:#EBA854;
		text-decoration: none;
	}
	a:hover{
		color:#72450d;
		cursor:pointer;
	}
	.recipe.cookingOrderList{
		display:flex;
		justify-content:space-between;
		padding : 20px 100px;
	}
	.listFlex{
		display:flex;
		justify-content:space-between;
		padding : 20px 100px;
		flex-direction:row;
	}
	.recipe.detailInfo-title{
		font-size:1.2em;
		font-weight:900;
		text-align:center;
		padding:20px 0px;
	}
	.recipe.comment-box-input{
		width:100%;
		min-height:150px;
		background-color:white;
		border-radius:20px;
		margin:50px 0px;
		padding : 20px;
		box-sizing:border-box;
		box-shadow:0 6px 18px rgba(0,0,0,.08);
	}
	.recipe.comment-box-output{
		width:100%;
		min-height:150px;
		background-color:white;
		border-radius:20px;
		margin:50px 0px;
		padding : 20px;
		box-sizing:border-box;
		box-shadow:0 6px 18px rgba(0,0,0,.08);
	}
	.recipe.comment-box-input>form{
		height:100%;
	}
	.recipe.comment-box-input input{
		background-color:transparent;
	}
	.recipe.pointer span,.recipe.pointer input{
		color:#EBA854;
		font-size:1em;
	}
	.recipe.pointer span:hover,.recipe.pointer input:hover{
		cursor:pointer;
		color:#72450d;
	}

	.recipe.btn{
		height:32px;
		width:150px;
		border-radius:20px;
		background-color:#FF9D23;
		color:white;
		border:none;
	}
	.recipe.btn.delete{
		background-color:#EAEAEA;
		color:#848484;
	}
	.recipe.gradeinput{
		text-align:center;
	}
	.recipe.gradeinput span:hover{
		cursor:pointer;
	}
	.recipe.line{
		border:1px solid #dddddd;
		margin:10px 10px;
	}
	
	hr{
	  border:1px solid #e6e6e6;
	 }
	button:hover{
		cursor:pointer;
	}
	.comment-box-input.not-login{
		width:100%;
		display:flex;
		flex-direction:column;
		gap : 20px;
		justify-content : center;
		text-align:center;
		box-sizing:border-box;
	}
	.recipe.textarea{
		height:75px;
		width:98%;
	}
</style>
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<div class="space"></div>
	<main class="recipe content">
		<form action="/recipe/commentInsert" method="post">
			<section class="recipe content-body">
				<div class="recipe content-box">
				
	
					<div class="recipe title" th:text="${recipeDetailSet.recipeDetail.recipeTitle}"></div>
					<hr>
					<div class="recipe info">
						<div class="recipe type" th:text="${recipeDetailSet.recipeDetail.recipeType}"></div>
						<div class="recipe level">ë‚œì´ë„ : <span th:text="${recipeDetailSet.recipeDetail.recipeLevel}"></span></div>
						<div class="recipe cookingTime"><span class="material-icons">access_time</span> <span th:text="${recipeDetailSet.recipeDetail.recipeCookingTime}"></span> Mins</div>
						<div class="recipe viewCount"><span class="material-icons">remove_red_eye</span> <span th:text="${recipeDetailSet.recipeDetail.recipeViewCount}"></span></div>
						<div class="recipe writeDate"><span class="material-icons">calendar_month</span> <span th:text="${recipeDetailSet.recipeDetail.recipeWriteDate}"></span></div>
					</div>
					<hr>
		
					<div class="recipe detailInfo">
					<div class="recipe detailInfo-title">ì¬ë£Œ</div>
						<div class="recipe ingredientList">
							<div class="listFlex">
								<div th:each="ri : ${recipeDetailSet.recipeIngredientList}" th:if="${recipeDetailSet.recipeIngredientList.indexOf(ri)+1}<=4">
										<div><span th:text="${ri.recipeIngredientName}" style="margin-right:10px;"></span><a class="recipe btn" th:href="@{https://www.coupang.com/np/search(q=${ri.recipeIngredientName})}"  target="_blank" style="padding:0px 15px; background-color: #FF9D23; border: none; color: #fff; border-radius: 15px; font-weight: bold">êµ¬ë§¤</a></div>
										<div th:text="${ri.recipeIngredientVolume}"></div>
								</div>
							</div>
							<div class="listFlex">
								<div th:each="ri : ${recipeDetailSet.recipeIngredientList}" th:if="${recipeDetailSet.recipeIngredientList.indexOf(ri)+1}>4">
										<div><span th:text="${ri.recipeIngredientName}" style="margin-right:10px;"></span><a class="recipe btn" th:href="@{https://www.coupang.com/np/search(q=${ri.recipeIngredientName})}"  target="_blank" style="padding:0px 15px; background-color: #FF9D23; border: none; color: #fff; border-radius: 15px; font-weight: bold">êµ¬ë§¤</a></div>
										<div th:text="${ri.recipeIngredientVolume}"></div>
								</div>
							</div>
						</div>
						<div class="recipe detailInfo-title">ì¡°ë¦¬ ìˆœì„œ</div>
						<div class="recipe cookingOrderList">
							<table>
								<tr>
									<th style="height:80px;">ìˆœì„œ</th>
									<th>ì¡°ë¦¬ ë‚´ìš©</th>
									<th>ì°¸ê³  ì´ë¯¸ì§€</th>
								</tr>
								<tr><td colspan="3"><hr></td></tr>
							<th:block th:each="rc : ${recipeDetailSet.recipeCookingOrderList}">
								<tr>
									<td style="width:10%; text-align:center;"><span th:text="${rc.recipeCookingOrder}" style="display:inline-block; line-height:40px; color: white; width:40px;height:40px; background-color:#EBA854; border-radius:40px; text-align:center"></span></td>
									<td th:text="${rc.recipeCookingContent}" style="width:40%; padding:40px"></td>
									<td style="width:40%;"><img th:src="${rc.recipeCookingOrderImgPath}" alt="ì¡°ë¦¬ìˆœì„œ" style = "width:100%;" ></td>
								</tr>
								<tr><td colspan="3"><hr></td></tr>
							</th:block>
							</table>
						</div>
						<div class="recipe detailInfo-title">ì£¼ì˜ì‚¬í•­</div>
						<div class="recipe caution" style="text-align:center;" th:text="${recipeDetailSet.recipeDetail.recipeCaution}"></div>
						<div class="space"></div>
						
						<th:block th:if="${session.member != null}">
						<hr style="margin-bottom:20px;">
							<div class="recipe gradeinput">
								<div>í‰ì ì£¼ê¸°</div>
								<span class="material-icons">star</span>
								<span class="material-icons">star</span>
								<span class="material-icons">star</span>
								<span class="material-icons">star</span>
								<span class="material-icons">star</span>
								<input type="hidden" name="recipeNo" id="recipeNo" th:value="${recipeDetailSet.recipeDetail.recipeNo}">
								<input type="hidden" name="memberNo" id="memberNo" th:value="${session.member.memberNo}">
							</div>
							<div class="recipe pointer" style="text-align:right; padding:0px 30px; color:red;" th:onclick="reportRecipe([[${recipeDetailSet.recipeDetail.recipeNo}]],[[${session.member.memberNo}]])" th:if="${recipeDetailSet.recipeDetail.memberNo}!=${session.member.memberNo}"><span>ì‹ ê³ í•˜ê¸°</span><span class="material-icons">cell_tower</span></div>
							<th:block th:if="${session.member.memberNo} == ${recipeDetailSet.recipeDetail.memberNo}">
								<hr style="margin-top:20px;">
								<div class="recipe button" style="display:flex; justify-content:center; gap:100px; padding:50px;">
									<button type="button" class="recipe btn edit" th:onclick="editRecipe([[${recipeDetailSet.recipeDetail.recipeNo}]])">ê²Œì‹œê¸€ ìˆ˜ì •</button>
									<button type="button" class="recipe btn delete" th:onclick="deleteRecipe([[${recipeDetailSet.recipeDetail.recipeNo}]])">ê²Œì‹œê¸€ ì‚­ì œ</button>
								</div>
							</th:block>
						</th:block>
						
					</div>
				</div>
			</section>
			<section class="recipe content-footer">
				<th:block th:if="${session.member!=null}">
					<div class="recipe comment-box-input">
						
						<!-- â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… ì „ì†¡ ì •ë³´ â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… -->
						
									<table class="recipe line" style="width:100%">
										<tr>
											<td style="width:10%;"><span class="material-icons" style="font-size:100px; color:#444444;">portrait</span></td>
											<td>
												
												<!-- â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… ë°ì´í„° ì¤€ë¹„ - ëŒ“ê¸€ ë‚´ìš© â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… -->
												<textarea name= "recipeCommentContent" class="recipe textarea" required></textarea>
											
											</td>
										</tr>
									</table>
									<!-- â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… ë°ì´í„° ì¤€ë¹„ - ë ˆì‹œí”¼ ë²ˆí˜¸ â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… -->
									<input type="hidden" name="recipeNo" th:value="${recipeDetailSet.recipeDetail.recipeNo}">
									<!-- â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… ë°ì´í„° ì¤€ë¹„ - ì‘ì„±ì ë²ˆí˜¸(PK) â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… -->
									<input type="hidden" name="memberNo" th:value="${session.member.memberNo}">
									<div style="text-align:right" class="recipe pointer">
										<span class="material-icons">create</span>
										
										<!-- â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… ë°ì´í„° ë³´ë‚´ê¸° â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… -->
										<input type="submit" value="ëŒ“ê¸€ ì‘ì„±" style="border:none" id="ajax">
									</div>
						
					</div>
				</th:block>
				<th:block th:if="${session.member ==null}">
				<div class="recipe comment-box-input not-login"> 
					<div><span>ëŒ“ê¸€ ì‘ì„±ì€ ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</span></div>
					<div><a class="recipe btn" th:href="@{/member/loginFrm}" style="display:inline-block; width:78px; height:26px;">ë¡œê·¸ì¸</a></div>
				</div>
				</th:block>
				<th:block th:if="${session.member !=null}">
				<div class="recipe comment-box-output" th:if=${recipeDetailSet.recipeCommentList.size}!=0>
					<th:block th:each="rcomment:${recipeDetailSet.recipeCommentList}">
						<div th:id="recipecommentbox+'-'+${rcomment.recipeCommentNo}">
							<table class="recipe line" style="width:100%;">
								<tr>
									<td rowspan="2" style="width:10%;"><span class="material-icons" style="font-size:100px; color:#444444;">portrait</span></td>
									<td style="width:20%; text-align:left; height:30px; padding-top:10px;"><div><span th:text="${rcomment.memberNickname}"></span></div></td>
									<td style="width:70%; text-align:right; height:30px; padding-top:10px; padding-right:10px;"><div><span th:text="${rcomment.recipeCommentDate}"></span></div></td>
								</tr>
								<tr>
									<td colspan="2" style="color:#444444;"><div id="recipeCommentDivId" th:text="${rcomment.recipeCommentContent}"></div></td>
								</tr>
							</table>
							<div class="recipe comment link" style="justify-content:flex-end; margin-bottom:30px; display:flex; gap:20px;">
								<a th:onclick="reportRecipeComment([[${rcomment.recipeCommentNo}]],[[${session.member.memberNo}]])" th:if="${rcomment.memberNo}!=${session.member.memberNo}">ì‹ ê³ í•˜ê¸°</a>
								<a th:onclick="editRecipeComment(this,[[${rcomment.recipeCommentNo}]],[[${rcomment.recipeNo}]],[[${rcomment.recipeCommentContent}]])" th:if="${rcomment.memberNo}==${session.member.memberNo}">ìˆ˜ì •í•˜ê¸°</a>
								<a th:onclick="deleteRecipeComment([[${rcomment.recipeCommentNo}]],[[${rcomment.recipeNo}]])" th:if="${rcomment.memberNo}==${session.member.memberNo}">ì‚­ì œí•˜ê¸°</a>
							</div>
						</div>
					</th:block>
				</div>
				<div class="recipe comment-box-output" th:if=${recipeDetailSet.recipeCommentList.size}==0 style="display:flex; align-items:center; justify-content:center;">
				ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.ğŸ¤¦â€â™‚ï¸ ì²« ëŒ“ê¸€ì„ ì…ë ¥í•´ë³´ì„¸ìš”!
				</div>
				</th:block>
			</section>
		</form>
	</main>

	<script src="/js/sweetalert.min.js"></script>
	<script>
	function editRecipeComment(o,recipeCommentNo,recipeNo,recipeCommentContent){
		//1. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> ìˆ˜ì •í•˜ê¸° ë²„íŠ¼ì„ ìˆ˜ì • ì™„ë£Œë¡œ ë³€ê²½
		$(o).text("ìˆ˜ì • ì™„ë£Œ");
		$(o).attr("onclick","editCommentComplete(this,"+recipeCommentNo+","+recipeNo+")");
		
		//2. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> ì‚­ì œí•˜ê¸° ë²„íŠ¼ì„ ìˆ˜ì • ì·¨ì†Œë¡œ ë³€ê²½
		$(o).next().text("ìˆ˜ì • ì·¨ì†Œ");
		$(o).next().attr("onclick","editCommentCancel(this,"+recipeCommentNo+","+recipeNo+")");
		
		//3. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> í˜„ì¬ ìˆ˜ì •í•˜ë ¤ëŠ” tableì—ì„œ ë‘ë²ˆì§¸ tr ë‚´ tdì˜ text ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
		const text=$(o).parent().prev().children().children().eq(1).children().children().eq(0).text();
		
		//4. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> í˜„ì¬ ìˆ˜ì •í•˜ë ¤ëŠ” tableì—ì„œ ë‘ë²ˆì§¸ tr ë‚´ tdì˜ text ê°’ì„ ìˆ¨ê¹€ ì²˜ë¦¬í•œë‹¤.
		$(o).parent().prev().children().children().eq(1).children().children().hide();
		
		//5. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> í˜„ì¬ ìˆ˜ì •í•˜ë ¤ëŠ” tableì—ì„œ ë‘ë²ˆì§¸ trì„ input ë°•ìŠ¤ë¡œ êµì²´í•œë‹¤. (valueê°’ì€ 3ë²ˆì˜ ê°’ìœ¼ë¡œ ë„£ì–´ë‘”ë‹¤.)
		const textarea = $("<textarea>");
		textarea.attr("name","recipeCommentContent");
		textarea.addClass("recipe textarea");
		textarea.val(text);
		const div=$("<div>");
		div.append(textarea);
		$(o).parent().prev().children().children().eq(1).children().append(div);
	}
	//7. ìˆ˜ì • ì™„ë£Œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ëŒ“ê¸€ ìˆ˜ì • ì™„ë£Œ js ë¥¼ í˜¸ì¶œí•œë‹¤.
	function editCommentComplete(o,recipeCommentNo,recipeNo){
		const editText=$(o).parent().prev().children().children().eq(1).children().children().children().val();
		console.log(editText);
		//8. ìˆ˜ì • ì™„ë£Œ jsì—ì„œëŠ” ëŒ“ê¸€ ìˆ˜ì • ì™„ë£Œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤.
		$.ajax({
			url:"/recipe/editComment",
			type:"post",
			data:{recipeCommentNo:recipeCommentNo,recipeNo:recipeNo,editText:editText},
			success:function(r){
				//ì¸í’‹ ë°•ìŠ¤ remove -> hideì²˜ë¦¬ëœ text ë‹¤ì‹œ show ì²˜ë¦¬ í›„ ìˆ˜ì •ëœ textë¡œ ê°’ ë³€ê²½
				if(r==="success"){
					swal({
						title : "ì•Œë¦¼",
						text : "ëŒ“ê¸€ ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
						icon : "warning",
						buttons : {
							confirm : {
								text:"í™•ì¸",
								value:true,
								visible : true,
								className : "btn-primary",
								closeModal : true
							}
						}
						}).then(function(isConfirm){
							$(o).parent().prev().children().children().eq(1).children().children().eq(0).show();
							$(o).parent().prev().children().children().eq(1).children().children().eq(0).text(editText);
							$(o).parent().prev().children().children().eq(1).children().children().eq(1).remove();
							//ì¸í’‹ ë°•ìŠ¤ remove -> hideì²˜ë¦¬ëœ text ë‹¤ì‹œ show ì²˜ë¦¬ í›„ ìˆ˜ì •ëœ textë¡œ ê°’ ë³€ê²½
							$(o).text("ìˆ˜ì •í•˜ê¸°");
							$(o).attr("onclick","editRecipeComment(this,"+recipeCommentNo+","+recipeNo+")");
							
							//2. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> ì‚­ì œí•˜ê¸° ë²„íŠ¼ì„ ìˆ˜ì • ì·¨ì†Œë¡œ ë³€ê²½
							$(o).next().text("ì‚­ì œí•˜ê¸°");
							$(o).next().attr("onclick","deleteRecipeComment("+recipeCommentNo+","+recipeNo+")");
						})
				}else if(r==="fail"){
					swal({
						title : "ì•Œë¦¼",
						text : "ëŒ“ê¸€ ìˆ˜ì •ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
						icon : "warning",
						buttons : {
							confirm : {
								text:"í™•ì¸",
								value:true,
								visible : true,
								className : "btn-primary",
								closeModal : true
							}
						}
						}).then(function(isConfirm){
							$(o).parent().prev().children().children().eq(1).children().children().eq(0).show();
							$(o).parent().prev().children().children().eq(1).children().children().eq(1).remove();
							//ì¸í’‹ ë°•ìŠ¤ remove -> hideì²˜ë¦¬ëœ text ë‹¤ì‹œ show ì²˜ë¦¬ í›„ ìˆ˜ì •ëœ textë¡œ ê°’ ë³€ê²½
						})
				}
			}
		})
	}
	function editCommentCancel(o,recipeCommentNo,recipeNo){
		$(o).parent().prev().children().children().eq(1).children().children().eq(0).show();
		$(o).parent().prev().children().children().eq(1).children().children().eq(1).remove();
		$(o).prev().text("ìˆ˜ì •í•˜ê¸°");
		$(o).prev().attr("onclick","editRecipeComment(this,"+recipeCommentNo+","+recipeNo+")");
		
		//2. ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤. -> ì‚­ì œí•˜ê¸° ë²„íŠ¼ì„ ìˆ˜ì • ì·¨ì†Œë¡œ ë³€ê²½
		$(o).text("ì‚­ì œí•˜ê¸°");
		$(o).attr("onclick","deleteRecipeComment("+recipeCommentNo+","+recipeNo+")");
	}
		//9. ìˆ˜ì • ì·¨ì†Œ jsì—ì„œëŠ” 4ë²ˆì—ì„œ hide ì²˜ë¦¬ëœ textë¥¼ ë‹¤ì‹œ show ì²˜ë¦¬í•˜ê³  í˜„ì¬ ì¸í’‹ë°•ìŠ¤ëŠ” remove 
		function deleteRecipe(recipeNo){
			swal({
				title : "ë ˆì‹œí”¼ ì‚­ì œ",
				text : "ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
				icon : "warning",
				buttons : {
					confirm : {
						text:"ì‚­ì œ",
						value:true,
						visible : true,
						className : "btn-primary",
						closeModal : true
					},
					cancel:{
						text:"ì·¨ì†Œ",
						value:false,
						visible : true,
						className : "btn-secondary",
						closeModal : true
					}
				}
			}).then(function(isConfirm){
					console.log(recipeNo);
				if(isConfirm){
					$.ajax({
						url:"/recipe/delete",
						type:"post",
						data:{recipeNo:recipeNo},
						success:function(result){
							if(result==="success")
								{
									swal({
										title : "ì•Œë¦¼",
										text : "ê²Œì‹œê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
										icon : "warning",
										buttons : {
											confirm : {
												text:"í™•ì¸",
												value:true,
												visible : true,
												className : "btn-primary",
												closeModal : true
											}
										}
									}).then(function(isConfirm){
										if(isConfirm){
											location.href="/recipe/list?reqPage=1";
										}
									});
								}else{
									swal({
										title : "ì‹¤íŒ¨",
										text : "ì‚­ì œ ê¶Œí•œì´ ì—†ì–´ìš”",
											icon : "warning",
											buttons : {
												confirm : {
													text:"í™•ì¸",
													value:true,
													visible : true,
													className : "btn-primary",
													closeModal : true
												}
											}
									})
								}
						}
					})
				}
			});
		}
		
		function editRecipe(recipeNo){
			swal({
				title : "ë ˆì‹œí”¼ ìˆ˜ì •",
				text : "ê²Œì‹œê¸€ì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
				icon : "warning",
				buttons : {
					confirm : {
						text:"ìˆ˜ì •",
						value:true,
						visible : true,
						className : "btn-primary",
						closeModal : true
					},
					cancel:{
						text:"ì·¨ì†Œ",
						value:false,
						visible : true,
						className : "btn-secondary",
						closeModal : true
					}
				}
			}).then(function(isConfirm){
					console.log(recipeNo);
				if(isConfirm){
					console.log("confirmìœ¼ë¡œ ë„˜ì–´ì˜´");
					location.href="/recipe/editFrm?recipeNo="+recipeNo;
				}
			});
		}
		
		function deleteRecipeComment(recipeCommentNo,recipeNo){
			
			swal({
				title : "ëŒ“ê¸€ ì‚­ì œ",
				text : "ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
				icon : "warning",
				buttons : {
					confirm : {
						text:"ì‚­ì œ",
						value:true,
						visible : true,
						className : "btn-primary",
						closeModal : true
					},
					cancel:{
						text:"ì·¨ì†Œ",
						value:false,
						visible : true,
						className : "btn-secondary",
						closeModal : true
					}
				}
			}).then(function(isConfirm){
					console.log("ì‚­ì œëœ ëŒ“ê¸€ì˜ ê²Œì‹œê¸€ ë²ˆí˜¸ : "+recipeNo);
					console.log("ì‚­ì œëœ ëŒ“ê¸€ ë²ˆí˜¸ : "+recipeCommentNo);
				if(isConfirm){
					$.ajax({
						url:"/recipe/deleteComment",
						type:"post",
						data:{recipeCommentNo:recipeCommentNo,recipeNo:recipeNo},
						success:function(result){
							console.log(result);
							if(result.result===1)
								{
									swal({
										title : "ì•Œë¦¼",
										text : "ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.",
										icon : "warning",
										buttons : {
											confirm : {
												text:"í™•ì¸",
												value:true,
												visible : true,
												className : "btn-primary",
												closeModal : true
											}
										}
										}).then(function(isConfirm){
											console.log(result.recipeCommentList);
											$("#recipecommentbox-"+recipeCommentNo).remove();
										})
										//$("#recipecommentbox-${rcomment.recipeCommentNo}").remove();
								}else{
									swal({
										title : "ì‹¤íŒ¨",
										text : "ì‚­ì œ ê¶Œí•œì´ ì—†ì–´ìš”",
											icon : "warning",
											buttons : {
												confirm : {
													text:"í™•ì¸",
													value:true,
													visible : true,
													className : "btn-primary",
													closeModal : true
												}
											}
									})
								}
						}
					})
				}
			});
		}
		
		function reportRecipe(recipeNo,memberNo){
			swal({
				title : "ë ˆì‹œí”¼ ì‹ ê³ ",
				text : "ê²Œì‹œê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
				icon : "warning",
				buttons : {
					confirm : {
						text:"ì‹ ê³ ",
						value:true,
						visible : true,
						className : "btn-primary",
						closeModal : true
					},
					cancel:{
						text:"ì·¨ì†Œ",
						value:false,
						visible : true,
						className : "btn-secondary",
						closeModal : true
					}
				}
			}).then(function(isConfirm){
				
				if(isConfirm){
					$.ajax({
						url:"/recipe/report",
						type:"post",
						data:{recipeNo:recipeNo,memberNo:memberNo},
						success:function(result){
							if(result==="success"){
								swal({
									title : "ì•Œë¦¼",
									text : "ê²Œì‹œê¸€ ì‹ ê³ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
									icon : "warning",
									buttons : {
										confirm : {
											text:"í™•ì¸",
											value:true,
											visible : true,
											className : "btn-primary",
											closeModal : true
										}
									}
								});
							}else{
								swal({
									title : "ì•Œë¦¼",
									text : "ì´ë¯¸ ì‹ ê³ í–ˆìŠµë‹ˆë‹¤.",
									icon : "warning",
									buttons : {
										confirm : {
											text:"í™•ì¸",
											value:true,
											visible : true,
											className : "btn-primary",
											closeModal : true
										}
									}
								});
							}
						}
					})
//					location.href="/recipe/detail?reqRecipeNo="+recipeNo;
				}
			})
		};
		
		function reportRecipeComment(recipeCommentNo,memberNo){
			console.log(recipeCommentNo);
			console.log(memberNo);
			swal({
				title : "ëŒ“ê¸€ ì‹ ê³ ",
				text : "ëŒ“ê¸€ì„ ì‹ ê³ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
				icon : "warning",
				buttons : {
					confirm : {
						text:"ì‹ ê³ ",
						value:true,
						visible : true,
						className : "btn-primary",
						closeModal : true
					},
					cancel:{
						text:"ì·¨ì†Œ",
						value:false,
						visible : true,
						className : "btn-secondary",
						closeModal : true
					}
				}
			}).then(function(isConfirm){
				console.log("ì‹ ê³ "+isConfirm);
				if(isConfirm){
					$.ajax({
						url:"/recipe/commentReport",
						type:"post",
						data:{recipeCommentNo:recipeCommentNo,memberNo:memberNo},
						success:function(result){
							if(result==="success"){
								swal({
									title : "ì•Œë¦¼",
									text : "ëŒ“ê¸€ ì‹ ê³ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
									icon : "warning",
									buttons : {
										confirm : {
											text:"í™•ì¸",
											value:true,
											visible : true,
											className : "btn-primary",
											closeModal : true
										}
									}
								});
							}else{
								swal({
									title : "ì•Œë¦¼",
									text : "ì´ë¯¸ ì‹ ê³ í–ˆìŠµë‹ˆë‹¤.",
									icon : "warning",
									buttons : {
										confirm : {
											text:"í™•ì¸",
											value:true,
											visible : true,
											className : "btn-primary",
											closeModal : true
										}
									}
								});
							}
						}
					})
//					location.href="/recipe/detail?reqRecipeNo="+recipeNo;
				}
			})
		};
		
		
		$(".ingredientList a").hover(function(){
			$(this).css("background-color","#ffca8a");
		},function(){
			$(this).css("background-color","#FF9D23");
		});
		
		$(".recipe.comment-box-input.not-login a").hover(function(){
			$(this).css("background-color","#ffca8a");
		},function(){
			$(this).css("background-color","#FF9D23");
		});
		
		const stars = $(".recipe.gradeinput span");
		stars.on("click",function(){
			stars.css("color","gray");
			$(this).prevAll("span").css("color","gold");
			$(this).css("color","gold");
			
			const index=stars.index(this);
			
			const recipeNo = $("#recipeNo").val();
			const memberNo = $("#memberNo").val();
			
			console.log(index);
			console.log(recipeNo);
			console.log(memberNo);
			$.ajax({
				url:"/recipe/gradeInsert",
				type:"post",
				data: {recipeNo:recipeNo,memberNo:memberNo,recipeRate:index+1},
				success:function(result){
					if(result === "success"){
						swal({
							title : "ì•Œë¦¼",
							text : "í‰ì  ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
							icon : "warning",
							buttons : {
								confirm : {
									text:"í™•ì¸",
									value:true,
									visible : true,
									className : "btn-primary",
									closeModal : true
								}
							}
						});
					}else{
						swal({
							title : "ì•Œë¦¼",
							text : "í‰ì  ë“±ë¡ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤",
							icon : "warning",
							buttons : {
								confirm : {
									text:"í™•ì¸",
									value:true,
									visible : true,
									className : "btn-primary",
									closeModal : true
								}
							}
						});
						
					}
				}
		});
		});
	</script>
	<th:block th:include="common/footer"></th:block>
</body>
</html>