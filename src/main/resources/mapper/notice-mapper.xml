<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.iei.notice.model.dao.NoticeDao">
  <select id="selectNoticeList" resultType="notice">
  	select * from
		(select rownum as rnum, n.* from
		(select
		notice_no,
		notice_title, notice_content, notice_write_date
		from notice_tbl order by notice_no
		desc
		)n
		)
		where #{start} <![CDATA[ <= ]]>
		rnum and rnum <![CDATA[ <= ]]>
		#{end}
  </select>
  
  <select id="selectNoticeTotal" resultType="int">
  	<![CDATA[ 
  	select count(*) from notice_tbl
	]]>
  </select>
  
  <insert id="insertNotice">
  	insert into notice_tbl values (#{noticeNo}, #{noticeTitle}, #{noticeContent}, #{notice}, sysdate)
  </insert>
  
  <insert id="insertNoticeFile">
  	insert into notice_file_tbl values(notice_file_seq.nextval, #{noticeNo}, #{filename}, #{filepath})
  </insert>
  
  <select id="getNoticeNo" resultType="int">
  	select notice_seq.nextval from dual
  </select>
  
  <select id="selectOneNotice" resultType="notice">
  	select * from notice_tbl where notice_no = #{noticeNo}
  </select>
  
  <select id="selectNoticeFile" resultType="noticeFile">
	select * from notice_file_tbl where notice_no = #{noticeNo}
	</select>
  
  <select id="selectNoticeFile" resultType="noticeFile">
  	select * from notice_file_tbl where notice_no = #{noticeNo}
  </select>
</mapper>